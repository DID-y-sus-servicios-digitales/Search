<!DOCTYPE html>
<html>
<head>
    <title>Asistente de voz</title>
</head>
<body>
    <p id="texto-reconocido"></p>

    <script>
        const textoReconocido = document.getElementById('texto-reconocido');
        let recognition;
        const synth = window.speechSynthesis;

        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'es-ES';

            recognition.onresult = event => {
                const resultado = event.results[event.results.length - 1][0].transcript.toLowerCase();
                textoReconocido.textContent = resultado;

                responder(resultado);
            };

            recognition.onend = () => {
                recognition.start();
            };

            recognition.start();
        } else {
            textoReconocido.textContent = 'El reconocimiento de voz no está disponible en este navegador.';
        }

        function responder(texto) {
            let respuesta = '';

            // Respuestas básicas
            if (texto.includes('hola')) {
                respuesta = '¡Hola! ¿En qué puedo ayudarte?';
            } else if (texto.includes('qué hora es')) {
                const ahora = new Date();
                respuesta = `Son las ${ahora.getHours()} horas y ${ahora.getMinutes()} minutos.`;
            } else if (texto.includes('qué tiempo hace')) {
                obtenerTiempo()
                    .then(tiempo => {
                        const utterance = new SpeechSynthesisUtterance(tiempo);
                        utterance.lang = 'es-ES';
                        synth.speak(utterance);
                    })
                    .catch(error => {
                        const utterance = new SpeechSynthesisUtterance('Lo siento, no pude obtener la información del tiempo.');
                        utterance.lang = 'es-ES';
                        synth.speak(utterance);
                    });
                return;
            } // ... (otras respuestas)

            const utterance = new SpeechSynthesisUtterance(respuesta);
            utterance.lang = 'es-ES';
            synth.speak(utterance);
        }

        async function obtenerTiempo(ubicacion = 'Madrid') {
            try {
                // ... (código para obtener el tiempo usando una API)
                return `La temperatura actual en ${ubicacion} es de ... grados Celsius.`;
            } catch (error) {
                console.error('Error al obtener el tiempo:', error);
                throw error;
            }
        }
    </script>
</body>
</html>
