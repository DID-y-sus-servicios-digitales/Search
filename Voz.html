<!DOCTYPE html>
<html>
<head>
    <title>Asistente de voz</title>
</head>
<body>
    <p id="texto-reconocido"></p>
    <audio id="audio-respuesta" controls style="display: none;"></audio>

    <script>
        const textoReconocido = document.getElementById('texto-reconocido');
        const audioRespuesta = document.getElementById('audio-respuesta');
        let recognition;

        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.lang = 'es-ES';

            recognition.onresult = event => {
                const resultado = event.results[event.results.length - 1][0].transcript.toLowerCase();
                textoReconocido.textContent = resultado;

                responder(resultado);
            };

            recognition.onend = () => {
                recognition.start();
            };

            recognition.start();
        } else {
            textoReconocido.textContent = 'El reconocimiento de voz no está disponible en este navegador.';
        }

        function responder(texto) {
            let respuesta = '';
            let archivoAudio = '';

            // Respuestas básicas
            if (texto.includes('hola')) {
                respuesta = '¡Hola! ¿En qué puedo ayudarte?';
                archivoAudio = 'audios/hola.mp3';
            } else if (texto.includes('qué hora es')) {
                const ahora = new Date();
                respuesta = `Son las ${ahora.getHours()} horas y ${ahora.getMinutes()} minutos.`;
                archivoAudio = 'audios/hora.mp3';
            } else if (texto.includes('qué tiempo hace')) {
                obtenerTiempo()
                    .then(tiempo => {
                        respuesta = tiempo;
                        archivoAudio = 'audios/tiempo.mp3';
                        reproducirAudio(archivoAudio);
                    })
                    .catch(error => {
                        respuesta = 'Lo siento, no pude obtener la información del tiempo.';
                        archivoAudio = 'audios/error_tiempo.mp3';
                        reproducirAudio(archivoAudio);
                    });
                return;
            } // ... (otras respuestas)

            // 50 respuestas adicionales
            else if (texto.includes('dime un dato curioso')) {
                respuesta = '¿Sabías que la miel nunca se echa a perder?';
                archivoAudio = 'audios/dato_curioso.mp3';
            } else if (texto.includes('cuál es la capital de')) {
                // ... (respuestas para capitales)
                archivoAudio = 'audios/capital.mp3';
            } else if (texto.includes('traduce')) {
                // ... (respuestas para traducciones)
                archivoAudio = 'audios/traduccion.mp3';
            } else if (texto.includes('qué es')) {
                // ... (respuestas para definiciones)
                archivoAudio = 'audios/definicion.mp3';
            } // ... (muchas más respuestas)
            else if (texto.includes('qué día es hoy')) {
                const ahora = new Date();
                const dias = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
                respuesta = `Hoy es ${dias[ahora.getDay()]}.`;
                archivoAudio = 'audios/dia_semana.mp3';
            } else if (texto.includes('dime un número aleatorio')) {
                respuesta = `Aquí tienes un número aleatorio: ${Math.floor(Math.random() * 100)}.`;
                archivoAudio = 'audios/numero_aleatorio.mp3';
            } else if (texto.includes('qué es javascript')) {
                respuesta = 'JavaScript es un lenguaje de programación utilizado para crear páginas web interactivas.';
                archivoAudio = 'audios/javascript.mp3';
            } else if (texto.includes('quién eres')) {
                respuesta = 'Soy un asistente virtual creado para ayudarte con tus tareas.';
                archivoAudio = 'audios/quien_eres.mp3';
            } else if (texto.includes('qué tiempo hay en')) {
              obtenerTiempo(texto.split('en')[1])
              .then(tiempo => {
                respuesta = tiempo;
                archivoAudio = 'audios/tiempo_ubicacion.mp3';
                reproducirAudio(archivoAudio);
              })
              .catch(error => {
                  respuesta = 'Lo siento, no pude obtener la información del tiempo para esa ubicación.';
                  archivoAudio = 'audios/error_tiempo_ubicacion.mp3';
                  reproducirAudio(archivoAudio);
              });
              return;
            } else if (texto.includes('qué día de la semana es')) {
                const diasSemana = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
                const fecha = new Date(texto.split('es')[1]);
                if (isNaN(fecha)) {
                    respuesta = 'No entendí la fecha. Inténtalo de nuevo.';
                    archivoAudio = 'audios/error_fecha.mp3';
                } else {
                    respuesta = `Ese día fue ${diasSemana[fecha.getDay()]}.`;
                    archivoAudio = 'audios/dia_semana_fecha.mp3';
                }
            } else if (texto.includes('calcula')) {
                try {
                    respuesta = eval(texto.replace('calcula', ''));
                    archivoAudio = 'audios/calculo.mp3';
                } catch (e) {
                    respuesta = 'No pude realizar el cálculo.';
                    archivoAudio = 'audios/error_calculo.mp3';
                }
            } else if (texto.includes('busca en wikipedia')) {
                const termino = texto.replace('busca en wikipedia', '').trim();
                respuesta = `Buscando ${termino} en Wikipedia...`;
                archivoAudio = 'audios/wikipedia.mp3';
                window.open(`https://es.wikipedia.org/wiki/${termino}`, '_blank');
            } else if (texto.includes('reproduce música')) {
                respuesta = 'Lo siento, no puedo reproducir música directamente. Pero puedo abrir YouTube si quieres.';
                archivoAudio = 'audios/musica.mp3';
            } // ... (muchas más respuestas)

            if (archivoAudio) {
                reproducirAudio(archivoAudio);
            }
        }

        function reproducirAudio(archivo) {
            audioRespuesta.src = archivo;
            audioRespuesta.play();
        }

        async function obtenerTiempo(ubicacion = 'Madrid') {
            try {
                // ... (código para obtener el tiempo usando una API)
                return `La temperatura actual en ${ubicacion} es de ... grados Celsius.`;
            } catch (error) {
                console.error('Error al obtener el tiempo:', error);
                throw error;
            }
        }
    </script>
</body>
</html>
